<!-- templates/index.html -->
{% extends "base.html" %} {% block title %}SecureScan - Análise de Segurança de
Arquivos{% endblock %} {% block content %}
<div class="row justify-content-center">
  <div class="col-lg-10">
    <div class="card shadow-lg border-0 rounded-lg mt-3">
      <div class="card-header bg-gradient text-white">
        <h3 class="my-2">
          <i class="fas fa-shield-alt"></i> Análise de Segurança de Arquivos
        </h3>
      </div>
      <div class="card-body">
        <div class="row mb-4">
          <div class="col-md-6">
            <h4 class="mb-3">Envie seu arquivo para análise de segurança</h4>
            <p class="mb-4">
              Nosso sistema analisará seu arquivo em busca de malwares, vírus e
              outras vulnerabilidades usando múltiplos motores de detecção de
              ameaças.
            </p>

            <div class="features mb-4">
              <div class="feature-item">
                <i class="fas fa-check-circle text-success"></i>
                <span>Análise com mais de 70 motores antivírus</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-check-circle text-success"></i>
                <span>Detecção de malware avançada</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-check-circle text-success"></i>
                <span>Verificação de vulnerabilidades</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-check-circle text-success"></i>
                <span>Relatório detalhado instantâneo</span>
              </div>
            </div>
          </div>
          <!-- Seção de upload no index.html -->
          <div class="col-md-6">
            <div class="upload-container">
              <form
                action="{{ url_for('upload_file') }}"
                method="post"
                enctype="multipart/form-data"
                id="upload-form"
              >
                <div class="upload-area" id="upload-area">
                  <i class="fas fa-cloud-upload-alt fa-4x mb-3"></i>
                  <h5>Arraste e solte seu arquivo aqui</h5>
                  <p>ou</p>
                  <input
                    type="file"
                    name="file"
                    id="file-input"
                    class="file-input"
                    required
                  />
                  <label for="file-input" class="btn btn-primary"
                    >Selecionar Arquivo</label
                  >
                  <p id="selected-filename" class="mt-2"></p>
                  <p class="text-muted mt-2">Tamanho máximo: 50MB</p>
                </div>
                <div class="mt-4 d-grid">
                  <button
                    type="submit"
                    class="btn btn-lg btn-success"
                    id="scan-button"
                  >
                    <i class="fas fa-virus-slash"></i> Analisar Arquivo
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="card mt-4 mb-3">
          <div class="card-header bg-light">
            <h5 class="mb-0">
              <i class="fas fa-info-circle"></i> Tipos de arquivo suportados
            </h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-3 col-6 mb-2">
                <div class="file-type">
                  <i class="far fa-file-alt"></i> Documentos (PDF, DOC, DOCX)
                </div>
              </div>
              <div class="col-md-3 col-6 mb-2">
                <div class="file-type">
                  <i class="far fa-file-excel"></i> Planilhas (XLS, XLSX)
                </div>
              </div>
              <div class="col-md-3 col-6 mb-2">
                <div class="file-type">
                  <i class="far fa-file-archive"></i> Arquivos (ZIP, RAR, 7Z)
                </div>
              </div>
              <div class="col-md-3 col-6 mb-2">
                <div class="file-type">
                  <i class="far fa-file-code"></i> Executáveis (EXE, DLL)
                </div>
              </div>
            </div>
            <div class="mt-2 small text-muted">
              E muitos outros formatos. Veja a lista completa na página Sobre.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Security Metrics Section -->
    <div class="row mt-5">
      <div class="col-md-4 mb-4">
        <div class="stat-card text-center p-4 h-100">
          <div class="stat-icon mb-3">
            <i class="fas fa-shield-alt fa-3x"></i>
          </div>
          <h3 class="counter">70+</h3>
          <p>Motores de Detecção</p>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="stat-card text-center p-4 h-100">
          <div class="stat-icon mb-3">
            <i class="fas fa-virus-slash fa-3x"></i>
          </div>
          <h3 class="counter">99.8%</h3>
          <p>Taxa de Detecção</p>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="stat-card text-center p-4 h-100">
          <div class="stat-icon mb-3">
            <i class="fas fa-bolt fa-3x"></i>
          </div>
          <h3 class="counter">100+</h3>
          <p>Análises por Minuto</p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const fileInput = document.getElementById("file-input");
    const selectedFilename = document.getElementById("selected-filename");
    const uploadForm = document.getElementById("upload-form");
    const scanButton = document.getElementById("scan-button");
    const uploadArea = document.getElementById("upload-area");

    // Display selected filename
    fileInput.addEventListener("change", function () {
      if (this.files && this.files[0]) {
        selectedFilename.textContent = this.files[0].name;
        selectedFilename.classList.add("selected");
      } else {
        selectedFilename.textContent = "";
        selectedFilename.classList.remove("selected");
      }
    });

    // Show loading state on form submit
    uploadForm.addEventListener("submit", function () {
      scanButton.innerHTML =
        '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Analisando...';
      scanButton.disabled = true;
    });

    // Drag and drop functionality
    ["dragenter", "dragover", "dragleave", "drop"].forEach((eventName) => {
      uploadArea.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    ["dragenter", "dragover"].forEach((eventName) => {
      uploadArea.addEventListener(eventName, highlight, false);
    });

    ["dragleave", "drop"].forEach((eventName) => {
      uploadArea.addEventListener(eventName, unhighlight, false);
    });

    function highlight() {
      uploadArea.classList.add("highlight");
    }

    function unhighlight() {
      uploadArea.classList.remove("highlight");
    }

    uploadArea.addEventListener("drop", handleDrop, false);

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;

      if (files && files[0]) {
        fileInput.files = files;
        selectedFilename.textContent = files[0].name;
        selectedFilename.classList.add("selected");
      }
    }
  });
</script>
{% endblock %}

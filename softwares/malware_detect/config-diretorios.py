#!/usr/bin/env python
"""
Script para configurar a estrutura de diretórios do projeto
e verificar se todos os arquivos necessários existem.
"""

import os
import sys

def setup_directories():
    """Configura a estrutura de diretórios do projeto."""
    # Diretórios principais
    directories = [
        'static',
        'static/css',
        'static/js',
        'static/img',
        'templates',
        'uploads',
        'results',
        'utils'
    ]
    
    # Verifica e cria diretórios se não existirem
    for directory in directories:
        if not os.path.exists(directory):
            os.makedirs(directory)
            print(f"Diretório criado: {directory}")
        else:
            print(f"Diretório já existe: {directory}")
    
    # Verifica os arquivos principais
    required_files = [
        ('static/css/main.css', 'Arquivo CSS principal não encontrado. Por favor, crie-o.'),
        ('static/js/main.js', 'Arquivo JavaScript principal não encontrado. Por favor, crie-o.'),
        ('templates/base.html', 'Template base não encontrado. Por favor, crie-o.'),
        ('templates/index.html', 'Template da página inicial não encontrado. Por favor, crie-o.'),
        ('templates/result.html', 'Template da página de resultados não encontrado. Por favor, crie-o.'),
        ('templates/about.html', 'Template da página sobre não encontrado. Por favor, crie-o.')
    ]
    
    all_ok = True
    for file_path, error_msg in required_files:
        if not os.path.exists(file_path):
            print(f"ERRO: {error_msg}")
            all_ok = False
    
    if all_ok:
        print("\nTodos os arquivos necessários foram encontrados!")
    else:
        print("\nAlguns arquivos necessários estão faltando. Por favor, crie-os.")
    
    # Verifica o arquivo __init__.py no diretório utils
    if not os.path.exists('utils/__init__.py'):
        with open('utils/__init__.py', 'w') as f:
            f.write('# Utils package initialization\n')
        print("Arquivo utils/__init__.py criado.")

if __name__ == "__main__":
    print("Configurando estrutura de diretórios do projeto SecureScan...")
    setup_directories()
    print("Configuração concluída.")